{{!--

If the user is logged in , and 'GET /protected' endpoint is called, you will render this view based on the specs.

--}}

<nav class="navbar">
  <div class="navbar-logo">
    <a href="#">
      <img src="/public/image/unnamed.png" alt="Logo">
    </a>
  </div>
  <ul class="navbar-nav">
    <li class="nav-item">
      <a class="nav-link" href="/">Home</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/viewactivesubscribes">Active Subscribed Listings</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/viewScoutSubscribedListingHistory">Subscribed Listing History</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/scoutWallet">My Wallet</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/profile">Profile</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/logout">Logout</a>
    </li>
  </ul>
</nav>
<br>

<div class="pageTitle">
    <p>
        {{title}}
    </p>
</div>
<form id="search-form"  method="post">
  <label for="searchInput">Search: </label><br>
    <input class="search-bar" type="text" name="searchInput" id="searchInput" placeholder="Search by postal code | Address | City | State | Country">
    {{#if reset}}
      <input type="submit" value="Reset" aria-label="Click here to Reset" >
    {{else}}
      <input type="submit" value="Search" aria-label="Click here to Search" >
    {{/if}}
  </form>


{{#if isEmptyListings}}
  <p>No listings found.</p>
{{else}}
  {{#each listings}}
    <div class="listing-card">
      <div class="card-content" data-listing-id="{{_id}}">
        <h1 class="listing-name">{{listingName}}</h1>
        <p class="listing-link"><a href="{{listingLink}}" target="_blank">{{listingLink}}</a></p>
        <p class="listing-address"> Street: {{street}}</p>
        <p class="listing-city">City: {{city}}</p>
        <p class="listing-state">State: {{state}}</p>
        <p class="listing-country">Country: {{country}}</p>
        <p class="listing-pincode">Pincode: {{pincode}}</p>
        <p class="listing-rent">Rent: {{rent}}</p>
        <p class="listing-additionalinfo">Additional Info: {{additionalInfo}}</p>
        <p class="listing-agent">Agent Number: {{agentNumber}}</p>
        <p class="listing-owner">Owner Number: {{ownerNumber}}</p>
        <p class="listing-reward">Reward: {{reward}}</p>
        <button class="subscribe-btn">Subscribe</button>
        {{!--  &#10003; is the unicode for check mark , found it from https://emojipedia.org/check-mark/  --}}
        <button class="unsubscribe-btn" style="display: none;">Unsubscribe</button>
        <div class="success-msg" style="display: none;">Subscribed <span>&#10003;</span></div>
      </div>
    </div>
  {{/each}}
{{/if}}

<p>
    Welcome {{firstName}}, the time is now: {{currentTime}}. Your role in the system is: {{role}}.
</p>



{{{scoutuser}}}

<script src="/public/js/subscribe.js"></script>
